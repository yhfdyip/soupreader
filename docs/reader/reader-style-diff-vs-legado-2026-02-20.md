# 阅读器样式差异清单（soupreader vs legado）

日期：`2026-02-20`  
对照基准：`ReadMenu.kt` + `view_read_menu.xml` + `ReadBookActivity.kt`  
当前参考图：根目录 `IMG_6983.PNG`

## 1. 差异概览（改造前）

| 区域 | 现状 | legado 语义 | 差异影响 |
|---|---|---|---|
| 顶部菜单 | 控件密度偏高，书源标签可能挤占操作区 | 顶栏信息紧凑但主次清晰，标题优先 | 阅读沉浸感与点击可读性受影响 |
| 右侧快捷栏 | 黑色遮罩偏重、按钮尺寸偏大 | 快捷动作存在但不抢正文视觉焦点 | 正文阅读时注意力被分散 |
| 搜索浮层 | 左右导航按钮与底部面板风格割裂 | 搜索结果导航组件风格统一 | 操作反馈连贯性一般 |
| 底部菜单 | 结构已同义，但边界层级仍偏平 | 底部工具与正文有明确“层分隔” | 菜单与正文边界不够明确 |

## 2. 本轮样式改造项（已实施）

### 2.1 顶部菜单（`reader_menus.dart`）

1. 降低控件噪声：圆形按钮与胶囊按钮尺寸小幅收敛，减少正文遮挡。
2. 强化信息层级：书名权重、章节信息字号与层级重新分配。
3. 约束书源标签宽度：避免长书源名挤压右侧操作按钮。
4. 顶栏边界更明确：顶部渐变与底部分隔线优化，减少“漂浮感”。

### 2.2 右侧快捷栏（`simple_reader_view.dart`）

1. 容器改为与当前阅读主题一致的半透明面板色，而非固定深黑。
2. 缩小按钮尺寸与间隔，保留热区但弱化侵入感。
3. 边框/阴影与全局 `_uiBorder`/暗色阴影体系统一。

### 2.3 搜索浮层（`simple_reader_view.dart`）

1. 左右翻找按钮与面板使用统一边框、圆角和阴影语言。
2. 底部面板改为圆角卡片化容器，保留安全区。
3. 按钮视觉权重重排（图标/文字比例更紧凑），提升信息密度。

### 2.4 底部菜单（`reader_bottom_menu.dart`）

1. 底部工具层增加上边界阴影，增强“菜单层”与正文层分离。
2. 上一章/下一章字号与粗细节奏优化，强调可点击性与状态感。
3. 亮度侧栏容器圆角与宽度微调，触控感与视觉一致性更好。
4. 四入口图标/文字尺寸微调，保持 legacy 顺序与 `60dp` 热区不变。

## 3. 改造后与 legado 对照结论

| 项目 | 结论 |
|---|---|
| 顶栏层级语义 | 已同义（标题优先、动作次级、附加信息弱化） |
| 右侧快捷动作可见性 | 已同义（存在但不压正文） |
| 搜索导航层级 | 已同义（结果信息 + 操作分组清晰） |
| 底栏结构与热区 | 保持同义（未改行为，仅优化视觉） |
| 功能语义 | 保持同义（本轮未改任何业务回调） |

## 4. 保留差异与原因

1. Flutter 的 Cupertino/自绘层与 Android 原生布局在阴影与抗锯齿呈现上存在平台差异，属于允许差异。
2. legado 中部分状态反馈依赖系统控件默认动画，Flutter 端以等义样式过渡替代。

## 5. 回归建议

1. 小屏设备（宽度 < 390）重点检查顶栏书源标签截断与按钮排列。
2. 深色主题下重点检查右侧快捷栏按钮边框可见度。
3. 搜索浮层在刘海屏/手势条设备上检查底部圆角与安全区过渡。
